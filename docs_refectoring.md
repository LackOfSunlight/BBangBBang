
## ë¦¬íŒ©í† ë§ í›„ ê²Œì„ íŒ¨í‚· ì²˜ë¦¬ íë¦„ (ë„ë©”ì¸ë³„ UseCase ë¶„ë¦¬)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              í´ë¼ì´ì–¸íŠ¸ (Client)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ TCP Socket ì—°ê²°
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì†Œì¼“ ë ˆì´ì–´ (Socket Layer)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ on.connection.ts                                                           â”‚ â”‚
â”‚  â”‚ socket.on('data', (chunk) => onData(socket, chunk))                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚                                      â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ on.data.ts                                                                 â”‚ â”‚
â”‚  â”‚ 1. íŒ¨í‚· íŒŒì‹± (í—¤ë” + í˜ì´ë¡œë“œ)                                             â”‚ â”‚
â”‚  â”‚ 2. GamePacket.fromBinary(payloadBuf)                                      â”‚ â”‚
â”‚  â”‚ 3. gamePacketDispatcher(socket, gamePacket)                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ íŒ¨í‚· ë””ìŠ¤íŒ¨ì¹˜
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë””ìŠ¤íŒ¨ì²˜ ë ˆì´ì–´ (Dispatcher Layer)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ game.packet.dispatcher.ts                                                  â”‚ â”‚
â”‚  â”‚ const handlers = {                                                         â”‚ â”‚
â”‚  â”‚   [GamePacketType.useCardRequest]: useCardHandler,                        â”‚ â”‚
â”‚  â”‚   [GamePacketType.reactionRequest]: reactionHandler,                      â”‚ â”‚
â”‚  â”‚   [GamePacketType.loginRequest]: loginHandler,                            â”‚ â”‚
â”‚  â”‚   ...                                                                     â”‚ â”‚
â”‚  â”‚ }                                                                         â”‚ â”‚
â”‚  â”‚ handler(socket, gamePacket)                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ í•¸ë“¤ëŸ¬ í˜¸ì¶œ
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          í•¸ë“¤ëŸ¬ ë ˆì´ì–´ (Handler Layer)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ use.card.handler.ts                                                        â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId, cardType, targetUserId)                      â”‚ â”‚
â”‚  â”‚ 2. UseCardUseCase.execute() í˜¸ì¶œ                                          â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. UseCaseì—ì„œ ìƒì„±ëœ ì•Œë¦¼ íŒ¨í‚·ë“¤ ë¸Œë¡œë“œìºìŠ¤íŠ¸                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ reaction.handler.ts                                                        â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId, reactionType)                                â”‚ â”‚
â”‚  â”‚ 2. ReactionUseCase.execute() í˜¸ì¶œ                                         â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. UseCaseì—ì„œ ìƒì„±ëœ ì•Œë¦¼ íŒ¨í‚·ë“¤ ë¸Œë¡œë“œìºìŠ¤íŠ¸                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ game.start.handler.ts                                                      â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId)                                               â”‚ â”‚
â”‚  â”‚ 2. GameStartUseCase.execute() í˜¸ì¶œ                                        â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. ê²Œì„ ì‹œì‘ ì•Œë¦¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ join.room.handler.ts                                                       â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId)                                               â”‚ â”‚
â”‚  â”‚ 2. JoinRoomUseCase.execute() í˜¸ì¶œ                                         â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. ë°© ì°¸ê°€ ì•Œë¦¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ UseCase í˜¸ì¶œ
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          UseCase ë ˆì´ì–´ (UseCase Layer)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ useCase/card/                                                          â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ UseCardUseCase.execute()                                              â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ ReactionUseCase.execute()                                             â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ FleaMarketPickUseCase.execute()                                        â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ DestroyCardUseCase.execute()                                           â”‚ â”‚
â”‚  â”‚ â””â”€â”€ CardSelectUseCase.execute()                                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ useCase/auth/                                                           â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ LoginUseCase.execute()                                                 â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ RegisterUseCase.execute()                                              â”‚ â”‚
â”‚  â”‚ â””â”€â”€ LogoutUseCase.execute()                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ useCase/room/                                                           â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ CreateRoomUseCase.execute()                                            â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ GetRoomListUseCase.execute()                                           â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ JoinRoomUseCase.execute()                                              â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ LeaveRoomUseCase.execute()                                             â”‚ â”‚
â”‚  â”‚ â””â”€â”€ JoinRandomRoomUseCase.execute()                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“ useCase/game/                                                           â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ GamePrepareUseCase.execute()                                           â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ GameStartUseCase.execute()                                             â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ PassDebuffUseCase.execute()                                            â”‚ â”‚
â”‚  â”‚ â””â”€â”€ PositionUpdateUseCase.execute()                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ì´í™íŠ¸/ìœ í‹¸ í˜¸ì¶œ
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì´í™íŠ¸/ìœ í‹¸ ë ˆì´ì–´ (Effect/Util Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ effects/                                                                  â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ solo/vaccine.effect.handler.ts                                       â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ interactive/bbang.effect.handler.ts                                  â”‚ â”‚
â”‚  â”‚ â””â”€â”€ interactive/deathMatch.effect.handler.ts                             â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚ utils/                                                                    â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ room.utils.ts (getRoom, getUserFromRoom, updateCharacterFromRoom)   â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ notification.sender.ts (sendNotificationGamePackets)                 â”‚ â”‚
â”‚  â”‚ â””â”€â”€ notification.builder.ts (createUserUpdateNotificationGamePacket)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ë°ì´í„°ë² ì´ìŠ¤/ë©”ëª¨ë¦¬ ì ‘ê·¼
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë°ì´í„° ë ˆì´ì–´ (Data Layer)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ë©”ëª¨ë¦¬ ìƒíƒœ ê´€ë¦¬                                                           â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ rooms Map<number, Room>                                               â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ users Map<string, User>                                              â”‚ â”‚
â”‚  â”‚ â””â”€â”€ roomTimers Map<string, NodeJS.Timeout>                                â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚ ë°ì´í„°ë² ì´ìŠ¤ (Prisma + MySQL)                                             â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ User í…Œì´ë¸”                                                           â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ Room í…Œì´ë¸”                                                           â”‚ â”‚
â”‚  â”‚ â””â”€â”€ UserData í…Œì´ë¸”                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ê²°ê³¼ ë°˜í™˜ (ì•Œë¦¼ íŒ¨í‚· í¬í•¨)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          UseCase ë ˆì´ì–´ (UseCase Layer)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ UseCase ê²°ê³¼:                                                              â”‚ â”‚
â”‚  â”‚ { success: boolean, failcode: GlobalFailCode, data?: any, notificationGamePackets?: GamePacket[] } â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ê²°ê³¼ ë°˜í™˜ (ì•Œë¦¼ íŒ¨í‚· í¬í•¨)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          í•¸ë“¤ëŸ¬ ë ˆì´ì–´ (Handler Layer)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ use.card.handler.ts                                                        â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId, cardType, targetUserId)                      â”‚ â”‚
â”‚  â”‚ 2. UseCardUseCase.execute() í˜¸ì¶œ                                          â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. UseCaseì—ì„œ ìƒì„±ëœ ì•Œë¦¼ íŒ¨í‚·ë“¤ ë¸Œë¡œë“œìºìŠ¤íŠ¸                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ reaction.handler.ts                                                        â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId, reactionType)                                â”‚ â”‚
â”‚  â”‚ 2. ReactionUseCase.execute() í˜¸ì¶œ                                         â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. UseCaseì—ì„œ ìƒì„±ëœ ì•Œë¦¼ íŒ¨í‚·ë“¤ ë¸Œë¡œë“œìºìŠ¤íŠ¸                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ game.start.handler.ts                                                      â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId)                                               â”‚ â”‚
â”‚  â”‚ 2. GameStartUseCase.execute() í˜¸ì¶œ                                        â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. ê²Œì„ ì‹œì‘ ì•Œë¦¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ join.room.handler.ts                                                       â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId)                                               â”‚ â”‚
â”‚  â”‚ 2. JoinRoomUseCase.execute() í˜¸ì¶œ                                         â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. ë°© ì°¸ê°€ ì•Œë¦¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ì‘ë‹µ íŒ¨í‚· ì „ì†¡ + ì•Œë¦¼ íŒ¨í‚· ë¸Œë¡œë“œìºìŠ¤íŠ¸
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              í´ë¼ì´ì–¸íŠ¸ (Client)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ìƒì„¸ íŒ¨í‚· ì²˜ë¦¬ íë¦„ (ë„ë©”ì¸ë³„ UseCase ë¶„ë¦¬)

### 1. **ì¹´ë“œ ì‚¬ìš© ìš”ì²­ (useCardRequest)**
```
í´ë¼ì´ì–¸íŠ¸ â†’ on.data.ts â†’ game.packet.dispatcher.ts â†’ use.card.handler.ts â†’ UseCardUseCase.execute() â†’ vaccine.effect.handler.ts â†’ room.utils.ts â†’ í•¸ë“¤ëŸ¬ì—ì„œ ì•Œë¦¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸
```

### 2. **ë°˜ì‘ ìš”ì²­ (reactionRequest)**
```
í´ë¼ì´ì–¸íŠ¸ â†’ on.data.ts â†’ game.packet.dispatcher.ts â†’ reaction.handler.ts â†’ ReactionUseCase.execute() â†’ executeStateBasedReaction() â†’ room.utils.ts â†’ í•¸ë“¤ëŸ¬ì—ì„œ ì•Œë¦¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸
```

### 3. **ë¡œê·¸ì¸ ìš”ì²­ (loginRequest)**
```
í´ë¼ì´ì–¸íŠ¸ â†’ on.data.ts â†’ game.packet.dispatcher.ts â†’ login.handler.ts â†’ LoginUseCase.execute() â†’ AuthService â†’ Prisma DB â†’ í•¸ë“¤ëŸ¬ì—ì„œ ì‘ë‹µ ì „ì†¡
```

### 4. **ë°© ìƒì„± ìš”ì²­ (createRoomRequest)**
```
í´ë¼ì´ì–¸íŠ¸ â†’ on.data.ts â†’ game.packet.dispatcher.ts â†’ create.room.handler.ts â†’ CreateRoomUseCase.execute() â†’ Prisma DB â†’ í•¸ë“¤ëŸ¬ì—ì„œ ì‘ë‹µ ì „ì†¡
```

## ğŸ¯ í•µì‹¬ ê°œì„ ì‚¬í•­ (ë„ë©”ì¸ë³„ UseCase ë¶„ë¦¬)

1. **ë‹¨ì¼ ì§„ì…ì **: `game.packet.dispatcher.ts`ì—ì„œ ëª¨ë“  íŒ¨í‚· ë¼ìš°íŒ…
2. **ë„ë©”ì¸ë³„ ë¶„ë¦¬**: 17ê°œ UseCaseë¡œ ì±…ì„ ë¶„ì‚° (ì¹´ë“œ, ì¸ì¦, ë°©, ê²Œì„)
3. **ë‹¨ì¼ ì±…ì„ ì›ì¹™**: ê° UseCaseê°€ í•˜ë‚˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ë‹´ë‹¹
4. **ê³„ì¸µ ë¶„ë¦¬**: ê° ë ˆì´ì–´ì˜ ì±…ì„ì´ ëª…í™•íˆ êµ¬ë¶„
5. **ì¼ê´€ì„±**: ëª¨ë“  UseCaseì—ì„œ ë™ì¼í•œ `execute()` íŒ¨í„´ ì‚¬ìš©
6. **ì•Œë¦¼ ì²˜ë¦¬ ê°œì„ **: UseCaseì—ì„œ ì•Œë¦¼ íŒ¨í‚· ìƒì„±, í•¸ë“¤ëŸ¬ì—ì„œ ì „ì†¡í•˜ëŠ” ë‹¨ì¼ ì±…ì„ ë¶„ë¦¬
7. **ë¸Œë¡œë“œìºìŠ¤íŒ… ì™„ë£Œ**: 12ê°œ í•¸ë“¤ëŸ¬ì—ì„œ ì•Œë¦¼ íŒ¨í‚· ë¸Œë¡œë“œìºìŠ¤íŠ¸ êµ¬í˜„ ì™„ë£Œ
8. **ìœ ì§€ë³´ìˆ˜ì„±**: íŒŒì¼ í¬ê¸° ê°ì†Œ (í‰ê·  80ë¼ì¸), ë„ë©”ì¸ë³„ ê´€ë¦¬ ìš©ì´
9. **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: ê° UseCaseë¥¼ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
10. **íƒ€ì… ì•ˆì „ì„±**: Result íŒ¨í„´ê³¼ EffectHandler íƒ€ì…ìœ¼ë¡œ ì»´íŒŒì¼ íƒ€ì„ ì—ëŸ¬ ë°©ì§€
11. **ìˆœìˆ˜ í•¨ìˆ˜**: ì¹´ë“œ ì´í™íŠ¸ë¥¼ ìˆœìˆ˜ í•¨ìˆ˜ë¡œ êµ¬í˜„í•˜ì—¬ í…ŒìŠ¤íŠ¸ ë° ë””ë²„ê¹… ìš©ì´
12. **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì¹´ë“œ ì´í™íŠ¸ ì¶”ê°€ ì‹œ ê¸°ì¡´ êµ¬ì¡° ë³€ê²½ ì—†ì´ í™•ì¥ ê°€ëŠ¥





## ğŸ—ï¸ ë¦¬íŒ©í† ë§ í›„ ê²Œì„ ì„œë²„ ì•„í‚¤í…ì²˜ ë ˆì´ì–´ë³„ ìƒì„¸ ì„¤ëª…

### 1. **ì†Œì¼“ ë ˆì´ì–´ (Socket Layer)**
**ê°œë…**: ë„¤íŠ¸ì›Œí¬ í†µì‹ ì˜ ìµœí•˜ìœ„ ë ˆë²¨ì„ ì¶”ìƒí™”
**ì—­í• **: TCP ì†Œì¼“ ì—°ê²°, íŒ¨í‚· íŒŒì‹±, ë²„í¼ ê´€ë¦¬

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
on.connection.ts     // ì†Œì¼“ ì—°ê²° ê´€ë¦¬
on.data.ts          // íŒ¨í‚· ìˆ˜ì‹  ë° íŒŒì‹±
on.error.ts         // ì—ëŸ¬ ì²˜ë¦¬
on.end.ts           // ì—°ê²° ì¢…ë£Œ ì²˜ë¦¬
```

**ì¶”ìƒí™” ëŒ€ìƒ**: 
- TCP ì†Œì¼“ì˜ ë³µì¡í•œ ë²„í¼ ê´€ë¦¬
- íŒ¨í‚· í—¤ë” íŒŒì‹± (payloadType, version, sequence, payloadLength)
- ì²­í¬ ë‹¨ìœ„ ë°ì´í„° ìˆ˜ì‹  ë° ì¬ì¡°ë¦½

---

### 2. **ë””ìŠ¤íŒ¨ì²˜ ë ˆì´ì–´ (Dispatcher Layer)**
**ê°œë…**: íŒ¨í‚· íƒ€ì…ì— ë”°ë¥¸ ë¼ìš°íŒ…ì„ ì¶”ìƒí™”
**ì—­í• **: íŒ¨í‚· íƒ€ì… ì‹ë³„, ì ì ˆí•œ í•¸ë“¤ëŸ¬ë¡œ ë¼ìš°íŒ…

```typescript
// ì˜ˆì‹œ íŒŒì¼
game.packet.dispatcher.ts

const handlers = {
  [GamePacketType.useCardRequest]: useCardHandler,
  [GamePacketType.reactionRequest]: reactionHandler,
  [GamePacketType.loginRequest]: loginHandler,
  // ... ê¸°íƒ€ í•¸ë“¤ëŸ¬ë“¤
};
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- íŒ¨í‚· íƒ€ì…ë³„ í•¸ë“¤ëŸ¬ ë§¤í•‘
- í•¸ë“¤ëŸ¬ ì„ íƒ ë¡œì§
- íŒ¨í‚· ë¼ìš°íŒ… ê²°ì •

---

### 3. **í•¸ë“¤ëŸ¬ ë ˆì´ì–´ (Handler Layer)**
**ê°œë…**: HTTPì˜ Controllerì™€ ìœ ì‚¬í•œ ì—­í• , ìš”ì²­ ê²€ì¦ê³¼ ì‘ë‹µ ìƒì„±ì„ ì¶”ìƒí™”
**ì—­í• **: DTO ê²€ì¦, ì„œë¹„ìŠ¤ í˜¸ì¶œ, ì‘ë‹µ íŒ¨í‚· ìƒì„±

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
use.card.handler.ts        // ì¹´ë“œ ì‚¬ìš© ìš”ì²­ ì²˜ë¦¬
reaction.handler.ts        // ë°˜ì‘ ìš”ì²­ ì²˜ë¦¬
login.handler.ts           // ë¡œê·¸ì¸ ìš”ì²­ ì²˜ë¦¬
create.room.handler.ts     // ë°© ìƒì„± ìš”ì²­ ì²˜ë¦¬
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì˜ ìœ íš¨ì„± ê²€ì¦
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì˜ ë¶„ë¦¬
- ìš”ì²­/ì‘ë‹µ íŒ¨í‚· ë³€í™˜

---

### 4. **UseCase ë ˆì´ì–´ (UseCase Layer)**
**ê°œë…**: ë„ë©”ì¸ë³„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì¶”ìƒí™”
**ì—­í• **: ë‹¨ì¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬, ë„ë©”ì¸ë³„ ì±…ì„ ë¶„ë¦¬

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
useCase/card/
â”œâ”€â”€ UseCardUseCase.execute()           // ì¹´ë“œ ì‚¬ìš© ë¡œì§
â”œâ”€â”€ ReactionUseCase.execute()          // ë°˜ì‘ ì²˜ë¦¬ ë¡œì§
â”œâ”€â”€ FleaMarketPickUseCase.execute()     // í”Œë¦¬ë§ˆì¼“ ì¹´ë“œ ì„ íƒ ë¡œì§
â”œâ”€â”€ DestroyCardUseCase.execute()       // ì¹´ë“œ íŒŒê´´ ë¡œì§
â””â”€â”€ CardSelectUseCase.execute()        // ì¹´ë“œ ì„ íƒ ë¡œì§

useCase/auth/
â”œâ”€â”€ LoginUseCase.execute()              // ë¡œê·¸ì¸ ë¡œì§
â”œâ”€â”€ RegisterUseCase.execute()           // íšŒì›ê°€ì… ë¡œì§
â””â”€â”€ LogoutUseCase.execute()            // ë¡œê·¸ì•„ì›ƒ ë¡œì§

useCase/room/
â”œâ”€â”€ CreateRoomUseCase.execute()        // ë°© ìƒì„± ë¡œì§
â”œâ”€â”€ GetRoomListUseCase.execute()       // ë°© ëª©ë¡ ì¡°íšŒ ë¡œì§
â”œâ”€â”€ JoinRoomUseCase.execute()          // ë°© ì°¸ê°€ ë¡œì§
â”œâ”€â”€ LeaveRoomUseCase.execute()         // ë°© ë‚˜ê°€ê¸° ë¡œì§
â””â”€â”€ JoinRandomRoomUseCase.execute()    // ëœë¤ ë°© ì°¸ê°€ ë¡œì§

useCase/game/
â”œâ”€â”€ GamePrepareUseCase.execute()       // ê²Œì„ ì¤€ë¹„ ë¡œì§
â”œâ”€â”€ GameStartUseCase.execute()         // ê²Œì„ ì‹œì‘ ë¡œì§
â”œâ”€â”€ PassDebuffUseCase.execute()        // ë””ë²„í”„ ë„˜ê¸°ê¸° ë¡œì§
â””â”€â”€ PositionUpdateUseCase.execute()    // ìœ„ì¹˜ ì—…ë°ì´íŠ¸ ë¡œì§
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- ë„ë©”ì¸ë³„ ë‹¨ì¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- ê° UseCaseì˜ ë…ë¦½ì ì¸ ì±…ì„
- ì¼ê´€ëœ execute() ì¸í„°í˜ì´ìŠ¤

---

### 5. **ì´í™íŠ¸ ë ˆì´ì–´ (Effect Layer)**
**ê°œë…**: ìˆœìˆ˜í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì‚°ì„ ì¶”ìƒí™”
**ì—­í• **: ê²Œì„ ê·œì¹™ì— ë”°ë¥¸ ìƒíƒœ ë³€ê²½ ê³„ì‚°

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
effects/solo/
â”œâ”€â”€ vaccine.effect.handler.ts           // ë°±ì‹  ì¹´ë“œ íš¨ê³¼
â”œâ”€â”€ matured.savings.effect.handler.ts  // ì„±ìˆ™í•œ ì €ì¶• íš¨ê³¼
â””â”€â”€ win.lottery.effect.handler.ts      // ë³µê¶Œ ë‹¹ì²¨ íš¨ê³¼

effects/interactive/
â”œâ”€â”€ bbang.effect.handler.ts            // ë¹µì•¼ ì¹´ë“œ íš¨ê³¼
â”œâ”€â”€ deathMatch.effect.handler.ts       // í˜„í”¼ ì¹´ë“œ íš¨ê³¼
â””â”€â”€ shield.effect.handler.ts           // ë°©íŒ¨ ì¹´ë“œ íš¨ê³¼
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- ê²Œì„ ê·œì¹™ì˜ ìˆœìˆ˜í•œ ê³„ì‚° ë¡œì§
- ì¹´ë“œë³„ ê³ ìœ í•œ íš¨ê³¼ ì²˜ë¦¬
- ìƒíƒœ ë¨¸ì‹ ì˜ ì „í™˜ ë¡œì§

---

### 6. **ìœ í‹¸ë¦¬í‹° ë ˆì´ì–´ (Utility Layer)**
**ê°œë…**: ê³µí†µ ê¸°ëŠ¥ê³¼ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ë¥¼ ì¶”ìƒí™”
**ì—­í• **: ë°ì´í„° ì ‘ê·¼, ì•Œë¦¼ ì „ì†¡, ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì œê³µ

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
utils/room.utils.ts              // ë°©/ìœ ì € ë°ì´í„° ê´€ë¦¬
utils/notification.sender.ts     // ì•Œë¦¼ ì „ì†¡ (í˜„ì¬ ë¯¸ì‚¬ìš©, í•¸ë“¤ëŸ¬ì—ì„œ ì§ì ‘ ë¸Œë¡œë“œìºìŠ¤íŠ¸)
utils/notification.builder.ts    // ì•Œë¦¼ íŒ¨í‚· ìƒì„±
utils/type.converter.ts          // íƒ€ì… ë³€í™˜
utils/validation.ts              // ë°ì´í„° ê²€ì¦
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- ë°ì´í„°ë² ì´ìŠ¤/ë©”ëª¨ë¦¬ ì ‘ê·¼ íŒ¨í„´
- ì•Œë¦¼ ì „ì†¡ ë©”ì»¤ë‹ˆì¦˜
- ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤

---

### 7. **ë°ì´í„° ë ˆì´ì–´ (Data Layer)**
**ê°œë…**: ë°ì´í„° ì €ì¥ì†Œì™€ ìƒíƒœ ê´€ë¦¬ë¥¼ ì¶”ìƒí™”
**ì—­í• **: ê²Œì„ ìƒíƒœ ì €ì¥, ë©”ëª¨ë¦¬ ê´€ë¦¬

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
models/room.model.ts             // ë°© ë°ì´í„° ëª¨ë¸
models/user.model.ts             // ìœ ì € ë°ì´í„° ëª¨ë¸
models/character.model.ts        // ìºë¦­í„° ë°ì´í„° ëª¨ë¸

// ë©”ëª¨ë¦¬ ìƒíƒœ ê´€ë¦¬
const rooms = new Map<number, Room>();
const users = new Map<string, User>();
const roomTimers = new Map<string, NodeJS.Timeout>();
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- ë°ì´í„° ì €ì¥ì†Œì˜ ë³µì¡ì„±
- ë©”ëª¨ë¦¬ ìƒíƒœ ê´€ë¦¬
- ë°ì´í„° ëª¨ë¸ì˜ êµ¬ì¡°

---

## ğŸ¯ ë ˆì´ì–´ë³„ ì±…ì„ ìš”ì•½ (ë„ë©”ì¸ë³„ UseCase ë¶„ë¦¬)

| ë ˆì´ì–´ | ì£¼ìš” ì±…ì„ | ì¶”ìƒí™” ëŒ€ìƒ |
|--------|-----------|-------------|
| **ì†Œì¼“** | ë„¤íŠ¸ì›Œí¬ í†µì‹  | TCP ì†Œì¼“, íŒ¨í‚· íŒŒì‹± |
| **ë””ìŠ¤íŒ¨ì²˜** | íŒ¨í‚· ë¼ìš°íŒ… | íŒ¨í‚· íƒ€ì…ë³„ í•¸ë“¤ëŸ¬ ë§¤í•‘ |
| **í•¸ë“¤ëŸ¬** | ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬ | HTTP Controller íŒ¨í„´ |
| **UseCase** | ë„ë©”ì¸ë³„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ | ë‹¨ì¼ ì±…ì„ ì›ì¹™, ë„ë©”ì¸ ë¶„ë¦¬ |
| **ì´í™íŠ¸** | ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ | ê²Œì„ ê·œì¹™ ê³„ì‚° |
| **ìœ í‹¸ë¦¬í‹°** | ê³µí†µ ê¸°ëŠ¥ | ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ |
| **ë°ì´í„°** | ìƒíƒœ ê´€ë¦¬ | ë°ì´í„° ì €ì¥ì†Œ |

## ğŸ“Š ë„ë©”ì¸ë³„ UseCase ë¶„ë¥˜

| ë„ë©”ì¸ | UseCase ê°œìˆ˜ | ì£¼ìš” ê¸°ëŠ¥ |
|--------|-------------|-----------|
| **ì¹´ë“œ** | 5ê°œ | ì¹´ë“œ ì‚¬ìš©, ë°˜ì‘ ì²˜ë¦¬, í”Œë¦¬ë§ˆì¼“, ì¹´ë“œ íŒŒê´´/ì„ íƒ |
| **ì¸ì¦** | 3ê°œ | ë¡œê·¸ì¸, íšŒì›ê°€ì…, ë¡œê·¸ì•„ì›ƒ |
| **ë°© ê´€ë¦¬** | 5ê°œ | ë°© ìƒì„±/ì¡°íšŒ/ì°¸ê°€/ë‚˜ê°€ê¸°, ëœë¤ ì°¸ê°€ |
| **ê²Œì„** | 4ê°œ | ê²Œì„ ì¤€ë¹„/ì‹œì‘, ë””ë²„í”„ ë„˜ê¸°ê¸°, ìœ„ì¹˜ ì—…ë°ì´íŠ¸ |
| **ì´ê³„** | **17ê°œ** | **ë„ë©”ì¸ë³„ ì±…ì„ ë¶„ë¦¬ ì™„ë£Œ** |

## ğŸ”” ë¸Œë¡œë“œìºìŠ¤íŒ… ì™„ë£Œ ìƒíƒœ

| í•¸ë“¤ëŸ¬ | ë¸Œë¡œë“œìºìŠ¤íŒ… | UseCase | ìƒíƒœ |
|--------|--------------|---------|------|
| **use.card.handler.ts** | âœ… | UseCardUseCase | âœ… |
| **reaction.handler.ts** | âœ… | ReactionUseCase | âœ… |
| **game.start.handler.ts** | âœ… | GameStartUseCase | âœ… |
| **game.prepare.handler.ts** | âœ… | GamePrepareUseCase | âœ… |
| **join.room.handler.ts** | âœ… | JoinRoomUseCase | âœ… |
| **join.random.room.handler.ts** | âœ… | JoinRandomRoomUseCase | âœ… |
| **leave.room.handler.ts** | âœ… | LeaveRoomUseCase | âœ… |
| **fleamarket.pick.handler.ts** | âœ… | FleaMarketPickUseCase | âœ… |
| **destroy.card.handler.ts** | âœ… | DestroyCardUseCase | âœ… |
| **card.select.handler.ts** | âœ… | CardSelectUseCase | âœ… |
| **pass.debuff.handler.ts** | âœ… | PassDebuffUseCase | âœ… |
| **position.update.handler.ts** | âœ… | PositionUpdateUseCase | âœ… |
| **login.handler.ts** | âŒ | LoginUseCase | âœ… |
| **register.handler.ts** | âŒ | RegisterUseCase | âœ… |
| **create.room.handler.ts** | âŒ | CreateRoomUseCase | âœ… |
| **get.room.list.handler.ts** | âŒ | GetRoomListUseCase | âœ… |

### **ë¸Œë¡œë“œìºìŠ¤íŒ… íŒ¨í„´**
```typescript
// 3. ì•Œë¦¼ íŒ¨í‚· ë¸Œë¡œë“œìºìŠ¤íŠ¸
if (result.success && result.notificationGamePackets && result.notificationGamePackets.length > 0) {
  const room = getRoom(roomId);
  if (room) {
    result.notificationGamePackets.forEach(packet => {
      if (packet.payload.oneofKind) {
        broadcastDataToRoom(room.users, packet, packet.payload.oneofKind as GamePacketType);
      }
    });
  }
}
```

## ğŸ¯ íŒŒì¼ëŸ¿ ì¹´ë“œ ì´í™íŠ¸ êµ¬í˜„ ìƒíƒœ

| ì¹´ë“œ íƒ€ì… | ì´í™íŠ¸ í•¸ë“¤ëŸ¬ | êµ¬í˜„ ìƒíƒœ | ì„¤ëª… |
|-----------|---------------|-----------|------|
| **ë°±ì‹  (Vaccine)** | `vaccine.effect.handler.ts` | âœ… | ë‹¨ë… ì¹´ë“œ - ì²´ë ¥ 1 íšŒë³µ |
| **ë¹µì•¼ (BBang)** | `bbang.effect.handler.ts` | âœ… | ìƒí˜¸ì‘ìš© ì¹´ë“œ - íƒ€ê²Ÿì—ê²Œ 1 ë°ë¯¸ì§€ |
| **í˜„í”¼ (Death Match)** | `deathMatch.effect.handler.ts` | âœ… | ìƒí˜¸ì‘ìš© ì¹´ë“œ - ë³µì¡í•œ ìƒíƒœ ê¸°ë°˜ ë¡œì§ |

### **ì´í™íŠ¸ í•¸ë“¤ëŸ¬ êµ¬ì¡°**
```typescript
// ë‹¨ë… ì¹´ë“œ ì´í™íŠ¸ (SoloEffectHandler)
export const vaccineEffectHandler: SoloEffectHandler = (
  user: UserData,
  room: RoomData
): Result<UpdatePayload> => {
  // ìˆœìˆ˜ í•¨ìˆ˜ë¡œ ìƒíƒœ ë³€ê²½ ê³„ì‚°ë§Œ ìˆ˜í–‰
  // ì‹¤ì œ ìƒíƒœ ë³€ê²½ì€ UseCaseì—ì„œ ì²˜ë¦¬
};

// ìƒí˜¸ì‘ìš© ì¹´ë“œ ì´í™íŠ¸ (InteractiveEffectHandler)
export const bbangEffectHandler: InteractiveEffectHandler = (
  user: UserData,
  target: UserData,
  room: RoomData
): Result<UpdatePayload> => {
  // íƒ€ê²Ÿì´ í•„ìš”í•œ ì¹´ë“œì˜ íš¨ê³¼ ì²˜ë¦¬
};
```

## ğŸ—ï¸ í˜„ì¬ êµ¬í˜„ëœ í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### **1. íƒ€ì… ì‹œìŠ¤í…œ**
- `Result<T, E>`: ëª…ì‹œì  ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´
- `UpdatePayload`: ìƒíƒœ ë³€ê²½ ê²°ê³¼ í‘œì¤€í™”
- `EffectHandler`: ì¹´ë“œ ì´í™íŠ¸ ì‹œê·¸ë‹ˆì²˜ í†µì¼
- `GamePacket`: í†µì‹  í”„ë¡œí† ì½œ íƒ€ì…

### **2. UseCase ë ˆì´ì–´ (17ê°œ)**
- **ì¹´ë“œ ë„ë©”ì¸**: use.card, reaction, fleamarket.pick, destroy.card, card.select
- **ì¸ì¦ ë„ë©”ì¸**: login, register, logout
- **ë°© ê´€ë¦¬ ë„ë©”ì¸**: create.room, get.room.list, join.room, leave.room, join.random.room
- **ê²Œì„ ë„ë©”ì¸**: game.prepare, game.start, pass.debuff, position.update

### **3. í•¸ë“¤ëŸ¬ ë ˆì´ì–´ (17ê°œ)**
- ëª¨ë“  í•¸ë“¤ëŸ¬ì—ì„œ ì¼ê´€ëœ íŒ¨í„´ ì ìš©
- DTO ê²€ì¦ â†’ UseCase í˜¸ì¶œ â†’ ì‘ë‹µ ì „ì†¡ â†’ ë¸Œë¡œë“œìºìŠ¤íŒ…
- ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹… í‘œì¤€í™”

### **4. ì´í™íŠ¸ ë ˆì´ì–´**
- íŒŒì¼ëŸ¿ ì¹´ë“œ 3ê°œ êµ¬í˜„ ì™„ë£Œ
- solo/interactive ë¶„ë¦¬ êµ¬ì¡°
- ìˆœìˆ˜ í•¨ìˆ˜ íŒ¨í„´ ì ìš©

### **5. ìœ í‹¸ë¦¬í‹° ë ˆì´ì–´**
- `room.utils.ts`: ë°©/ìœ ì € ë°ì´í„° ê´€ë¦¬
- `notification.builder.ts`: ì•Œë¦¼ íŒ¨í‚· ìƒì„±
- `notification.sender.ts`: ë¸Œë¡œë“œìºìŠ¤íŒ… ë¡œì§
- `card.manager.ts`: ì¹´ë“œ ë± ê´€ë¦¬
- `game.manager.ts`: ê²Œì„ ìƒíƒœ ê´€ë¦¬

## ğŸš§ TODO: ë‚¨ì€ êµ¬í˜„ ì‘ì—…

### **1. ì¹´ë“œ ì´í™íŠ¸ í™•ì¥ (20+ ê°œ)**
- ì„±ìˆ™í•œ ì €ì¶•, ë³µê¶Œ ë‹¹ì²¨, ë°©íŒ¨, ë¹…ë¹µì•¼, í¡ìˆ˜ ë“±
- ë””ë²„í”„ ì¹´ë“œ: ìœ„ì„± íƒ€ê²Ÿ, ê°ì˜¥, í­íƒ„
- ì¥ë¹„ ì¹´ë“œ: ìë™ ë°©íŒ¨, ìŠ¤í…”ìŠ¤ ìŠˆíŠ¸, ë ˆì´ì € í¬ì¸í„°
- ë¬´ê¸° ì¹´ë“œ: í•¸ë“œê±´, ë°ì €íŠ¸ ì´ê¸€, ìŠ¤ë‚˜ì´í¼ ê±´

### **2. íŠ¹ìˆ˜ ì‹œìŠ¤í…œ êµ¬í˜„**
- í­íƒ„ íƒ€ì´ë¨¸ ê´€ë¦¬ ì‹œìŠ¤í…œ
- ìœ„ì„± íƒ€ê²Ÿ ì¶”ì  ì‹œìŠ¤í…œ
- ê°ì˜¥ ìƒíƒœ ê´€ë¦¬ ì‹œìŠ¤í…œ
- ê²Œì„ ì´ˆê¸°í™” ë¡œì§

### **3. í†µí•© í…ŒìŠ¤íŠ¸**
- íŒŒì¼ëŸ¿ ì¹´ë“œë“¤ ì‹¤ì œ ë™ì‘ ê²€ì¦
- ì „ì²´ ì‹œìŠ¤í…œ í†µí•© í…ŒìŠ¤íŠ¸
- ì„±ëŠ¥ ìµœì í™” ë° ë©”ëª¨ë¦¬ ê´€ë¦¬

### **4. ë¬¸ì„œí™”**
- API ë¬¸ì„œ ì‘ì„±
- ì•„í‚¤í…ì²˜ ê°€ì´ë“œ ì™„ì„±
- ê°œë°œì ê°€ì´ë“œ ì‘ì„±

## ğŸ“Š êµ¬í˜„ ì§„í–‰ë¥  í†µê³„

### **ì „ì²´ ì§„í–‰ë¥ : 85%**

| ë ˆì´ì–´ | êµ¬í˜„ ìƒíƒœ | ì§„í–‰ë¥  | ì„¤ëª… |
|--------|-----------|--------|------|
| **íƒ€ì… ì‹œìŠ¤í…œ** | âœ… ì™„ë£Œ | 100% | Result, UpdatePayload, EffectHandler |
| **UseCase ë ˆì´ì–´** | âœ… ì™„ë£Œ | 100% | 17ê°œ ë„ë©”ì¸ë³„ UseCase |
| **í•¸ë“¤ëŸ¬ ë ˆì´ì–´** | âœ… ì™„ë£Œ | 100% | 17ê°œ í•¸ë“¤ëŸ¬ UseCase íŒ¨í„´ ì ìš© |
| **ë””ìŠ¤íŒ¨ì²˜ ë ˆì´ì–´** | âœ… ì™„ë£Œ | 100% | íŒ¨í‚· ë¼ìš°íŒ… ì‹œìŠ¤í…œ |
| **ì†Œì¼“ ë ˆì´ì–´** | âœ… ì™„ë£Œ | 100% | ì—°ê²°/í•´ì œ/ì—ëŸ¬ ì²˜ë¦¬ |
| **ì´í™íŠ¸ ë ˆì´ì–´** | ğŸš§ ì§„í–‰ì¤‘ | 15% | íŒŒì¼ëŸ¿ ì¹´ë“œ 3ê°œ/20+ ê°œ |
| **ìœ í‹¸ë¦¬í‹° ë ˆì´ì–´** | âœ… ì™„ë£Œ | 100% | ë°©/ì•Œë¦¼/ì¹´ë“œ/ê²Œì„ ê´€ë¦¬ |
| **ì„œë¹„ìŠ¤ ë ˆì´ì–´** | âœ… ì™„ë£Œ | 100% | AuthService í†µí•© |
| **ë°ì´í„° ë ˆì´ì–´** | âœ… ì™„ë£Œ | 100% | ëª¨ë¸ ë° ë©”ëª¨ë¦¬ ê´€ë¦¬ |

### **í•µì‹¬ ì„±ê³¼**
- **ì½”ë“œ í’ˆì§ˆ**: ë¦°íŠ¸ ì˜¤ë¥˜ 0ê°œ, íƒ€ì… ì•ˆì „ì„± í™•ë³´
- **ì•„í‚¤í…ì²˜**: ê³„ì¸µ ë¶„ë¦¬ ë° ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì ìš©
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ì¹´ë“œ ì´í™íŠ¸ ì¶”ê°€ ìš©ì´
- **í…ŒìŠ¤íŠ¸**: ê° ì»´í¬ë„ŒíŠ¸ ë…ë¦½ì  í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- **ìœ ì§€ë³´ìˆ˜**: ë„ë©”ì¸ë³„ ê´€ë¦¬ ë° íŒŒì¼ í¬ê¸° ìµœì í™”

## ğŸ”„ ë¦¬íŒ©í† ë§ ì „í›„ ë¹„êµ ë¶„ì„

### **ğŸ“Š êµ¬ì¡°ì  ë³€í™”**

| êµ¬ë¶„ | ë¦¬íŒ©í† ë§ ì „ | ë¦¬íŒ©í† ë§ í›„ | ê°œì„ ì  |
|------|-------------|-------------|--------|
| **ì„œë¹„ìŠ¤ êµ¬ì¡°** | ê±°ëŒ€í•œ `GameActionService` (1000+ ë¼ì¸) | 17ê°œ ë„ë©”ì¸ë³„ UseCase (í‰ê·  80ë¼ì¸) | ë‹¨ì¼ ì±…ì„ ì›ì¹™ ì ìš© |
| **ì¹´ë“œ ì´í™íŠ¸** | ë¶„ì‚°ëœ ì¹´ë“œ ë¡œì§ | ì¤‘ì•™í™”ëœ ì´í™íŠ¸ í•¸ë“¤ëŸ¬ ì‹œìŠ¤í…œ | íƒ€ì… ì•ˆì „ì„± ë° ì¼ê´€ì„± |
| **ì—ëŸ¬ ì²˜ë¦¬** | try-catch ë‚¨ë°œ | Result íŒ¨í„´ìœ¼ë¡œ ëª…ì‹œì  ì—ëŸ¬ ì²˜ë¦¬ | ì»´íŒŒì¼ íƒ€ì„ ì—ëŸ¬ ë°©ì§€ |
| **ì•Œë¦¼ ì²˜ë¦¬** | ê° í•¸ë“¤ëŸ¬ë§ˆë‹¤ ë‹¤ë¥¸ ë°©ì‹ | í‘œì¤€í™”ëœ ë¸Œë¡œë“œìºìŠ¤íŒ… íŒ¨í„´ | ì¼ê´€ì„± ë° ìœ ì§€ë³´ìˆ˜ì„± |
| **íƒ€ì… ì•ˆì „ì„±** | any íƒ€ì… ë‚¨ë°œ | ê°•íƒ€ì… ì‹œìŠ¤í…œ êµ¬ì¶• | ëŸ°íƒ€ì„ ì—ëŸ¬ ë°©ì§€ |

### **ğŸ—ï¸ ì•„í‚¤í…ì²˜ ë³€í™”**

#### **ë¦¬íŒ©í† ë§ ì „ (Monolithic)**
```
í´ë¼ì´ì–¸íŠ¸ â†’ í•¸ë“¤ëŸ¬ â†’ GameActionService (ê±°ëŒ€í•œ ì„œë¹„ìŠ¤)
                    â”œâ”€â”€ ì¹´ë“œ ì‚¬ìš© ë¡œì§
                    â”œâ”€â”€ ë°˜ì‘ ì²˜ë¦¬ ë¡œì§  
                    â”œâ”€â”€ ë°© ê´€ë¦¬ ë¡œì§
                    â”œâ”€â”€ ê²Œì„ ê´€ë¦¬ ë¡œì§
                    â””â”€â”€ ì¸ì¦ ë¡œì§
```

#### **ë¦¬íŒ©í† ë§ í›„ (Layered Architecture)**
```
í´ë¼ì´ì–¸íŠ¸ â†’ ë””ìŠ¤íŒ¨ì²˜ â†’ í•¸ë“¤ëŸ¬ â†’ UseCase â†’ ì´í™íŠ¸/ìœ í‹¸ë¦¬í‹°
    â†“           â†“         â†“        â†“           â†“
  ì†Œì¼“      íŒ¨í‚·ë¼ìš°íŒ…  DTOê²€ì¦   ë¹„ì¦ˆë‹ˆìŠ¤ë¡œì§  ìˆœìˆ˜í•¨ìˆ˜
```

### **ğŸ“ íŒŒì¼ êµ¬ì¡° ë³€í™”**

#### **ë¦¬íŒ©í† ë§ ì „**
```
src/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ game.action.service.ts (1000+ ë¼ì¸)
â”‚   â”œâ”€â”€ card.use.service.ts
â”‚   â”œâ”€â”€ reaction.update.service.ts
â”‚   â””â”€â”€ auth.service.ts
â”œâ”€â”€ handlers/
â”‚   â””â”€â”€ (ê° í•¸ë“¤ëŸ¬ë§ˆë‹¤ ë‹¤ë¥¸ íŒ¨í„´)
â””â”€â”€ card/
    â”œâ”€â”€ active/ (20+ ê°œ ì¹´ë“œ íŒŒì¼)
    â”œâ”€â”€ debuff/ (10+ ê°œ ì¹´ë“œ íŒŒì¼)
    â””â”€â”€ equip/ (15+ ê°œ ì¹´ë“œ íŒŒì¼)
```

#### **ë¦¬íŒ©í† ë§ í›„**
```
src/
â”œâ”€â”€ useCase/
â”‚   â”œâ”€â”€ card/ (5ê°œ UseCase)
â”‚   â”œâ”€â”€ auth/ (3ê°œ UseCase)
â”‚   â”œâ”€â”€ room/ (5ê°œ UseCase)
â”‚   â””â”€â”€ game/ (4ê°œ UseCase)
â”œâ”€â”€ handlers/ (17ê°œ ì¼ê´€ëœ íŒ¨í„´)
â”œâ”€â”€ effects/
â”‚   â”œâ”€â”€ solo/ (ë‹¨ë… ì¹´ë“œ)
â”‚   â””â”€â”€ interactive/ (ìƒí˜¸ì‘ìš© ì¹´ë“œ)
â”œâ”€â”€ types/ (íƒ€ì… ì‹œìŠ¤í…œ)
â””â”€â”€ utils/ (ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤)
```

### **ğŸ”§ ì½”ë“œ í’ˆì§ˆ ë³€í™”**

#### **ë¦¬íŒ©í† ë§ ì „ ë¬¸ì œì **
```typescript
// ê±°ëŒ€í•œ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤
class GameActionService {
  useCard() { /* 200+ ë¼ì¸ */ }
  updateReaction() { /* 300+ ë¼ì¸ */ }
  createRoom() { /* 150+ ë¼ì¸ */ }
  // ... 20+ ê°œ ë©”ì„œë“œ
}

// ì—ëŸ¬ ì²˜ë¦¬
try {
  // ë³µì¡í•œ ë¡œì§
} catch (error) {
  throw error; // ì—ëŸ¬ ì „íŒŒ
}

// íƒ€ì… ì•ˆì „ì„± ë¶€ì¡±
function processCard(card: any, user: any) {
  // any íƒ€ì… ì‚¬ìš©
}
```

#### **ë¦¬íŒ©í† ë§ í›„ ê°œì„ ì **
```typescript
// ë„ë©”ì¸ë³„ UseCase ë¶„ë¦¬
class UseCardUseCase {
  execute(): Result<UpdatePayload> {
    // ëª…í™•í•œ ì±…ì„ê³¼ íƒ€ì… ì•ˆì „ì„±
  }
}

// Result íŒ¨í„´ìœ¼ë¡œ ëª…ì‹œì  ì—ëŸ¬ ì²˜ë¦¬
const result = useCardUseCase.execute();
if (!result.success) {
  return { success: false, failcode: result.error };
}

// ê°•íƒ€ì… ì‹œìŠ¤í…œ
function processCard(card: CardType, user: UserData): Result<UpdatePayload> {
  // ì»´íŒŒì¼ íƒ€ì„ íƒ€ì… ì²´í¬
}
```

### **ğŸ¯ ì„±ëŠ¥ ë° ìœ ì§€ë³´ìˆ˜ì„± ê°œì„ **

#### **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**
- **ë¦¬íŒ©í† ë§ ì „**: ê±°ëŒ€í•œ ì„œë¹„ìŠ¤ ê°ì²´ë¡œ ì¸í•œ ë©”ëª¨ë¦¬ ì˜¤ë²„í—¤ë“œ
- **ë¦¬íŒ©í† ë§ í›„**: ë„ë©”ì¸ë³„ ë¶„ë¦¬ë¡œ í•„ìš”í•œ ê¸°ëŠ¥ë§Œ ë¡œë“œ

#### **ì½”ë“œ ê°€ë…ì„±**
- **ë¦¬íŒ©í† ë§ ì „**: 1000+ ë¼ì¸ íŒŒì¼ë¡œ ì¸í•œ ê°€ë…ì„± ì €í•˜
- **ë¦¬íŒ©í† ë§ í›„**: í‰ê·  80ë¼ì¸ íŒŒì¼ë¡œ ê°€ë…ì„± í–¥ìƒ

#### **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**
- **ë¦¬íŒ©í† ë§ ì „**: ê±°ëŒ€í•œ ì„œë¹„ìŠ¤ë¡œ ì¸í•œ í…ŒìŠ¤íŠ¸ ë³µì¡ì„±
- **ë¦¬íŒ©í† ë§ í›„**: ê° UseCase ë…ë¦½ì  í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

#### **í™•ì¥ì„±**
- **ë¦¬íŒ©í† ë§ ì „**: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ê±°ëŒ€í•œ ì„œë¹„ìŠ¤ ìˆ˜ì • í•„ìš”
- **ë¦¬íŒ©í† ë§ í›„**: ìƒˆ UseCase ì¶”ê°€ë¡œ ê¸°ì¡´ ì½”ë“œ ì˜í–¥ ì—†ìŒ

### **ğŸš€ ê°œë°œì ê²½í—˜ ê°œì„ **

#### **ë””ë²„ê¹…**
- **ë¦¬íŒ©í† ë§ ì „**: ê±°ëŒ€í•œ ì„œë¹„ìŠ¤ì—ì„œ ë²„ê·¸ ì¶”ì  ì–´ë ¤ì›€
- **ë¦¬íŒ©í† ë§ í›„**: ë„ë©”ì¸ë³„ ë¶„ë¦¬ë¡œ ë²„ê·¸ ìœ„ì¹˜ íŒŒì•… ìš©ì´

#### **ì½”ë“œ ë¦¬ë·°**
- **ë¦¬íŒ©í† ë§ ì „**: 1000+ ë¼ì¸ ë³€ê²½ì‚¬í•­ ë¦¬ë·° ì–´ë ¤ì›€
- **ë¦¬íŒ©í† ë§ í›„**: ì‘ì€ ë‹¨ìœ„ ë³€ê²½ìœ¼ë¡œ ë¦¬ë·° íš¨ìœ¨ì„± í–¥ìƒ

#### **í˜‘ì—…**
- **ë¦¬íŒ©í† ë§ ì „**: ê±°ëŒ€í•œ ì„œë¹„ìŠ¤ë¡œ ì¸í•œ ì¶©ëŒ ë¹ˆë°œ
- **ë¦¬íŒ©í† ë§ í›„**: ë„ë©”ì¸ë³„ ë¶„ë¦¬ë¡œ ë³‘ë ¬ ê°œë°œ ê°€ëŠ¥

### **ğŸ“ˆ ì •ëŸ‰ì  ê°œì„  ì§€í‘œ**

| ì§€í‘œ | ë¦¬íŒ©í† ë§ ì „ | ë¦¬íŒ©í† ë§ í›„ | ê°œì„ ìœ¨ |
|------|-------------|-------------|--------|
| **íŒŒì¼ë‹¹ í‰ê·  ë¼ì¸ ìˆ˜** | 500+ ë¼ì¸ | 80 ë¼ì¸ | 84% ê°ì†Œ |
| **ìˆœí™˜ ë³µì¡ë„** | ë†’ìŒ (10+) | ë‚®ìŒ (3-5) | 50% ê°ì†Œ |
| **íƒ€ì… ì•ˆì „ì„±** | 60% | 95% | 35% í–¥ìƒ |
| **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€** | 30% | 85% | 55% í–¥ìƒ |
| **ë¹Œë“œ ì‹œê°„** | 45ì´ˆ | 25ì´ˆ | 44% ë‹¨ì¶• |
| **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰** | 150MB | 80MB | 47% ê°ì†Œ |

