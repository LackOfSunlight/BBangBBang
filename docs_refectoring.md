
## ë¦¬íŒ©í† ë§ í›„í›„ ê²Œì„ íŒ¨í‚· ì²˜ë¦¬ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              í´ë¼ì´ì–¸íŠ¸ (Client)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ TCP Socket ì—°ê²°
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì†Œì¼“ ë ˆì´ì–´ (Socket Layer)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ on.connection.ts                                                           â”‚ â”‚
â”‚  â”‚ socket.on('data', (chunk) => onData(socket, chunk))                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚                                      â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ on.data.ts                                                                 â”‚ â”‚
â”‚  â”‚ 1. íŒ¨í‚· íŒŒì‹± (í—¤ë” + í˜ì´ë¡œë“œ)                                             â”‚ â”‚
â”‚  â”‚ 2. GamePacket.fromBinary(payloadBuf)                                      â”‚ â”‚
â”‚  â”‚ 3. gamePacketDispatcher(socket, gamePacket)                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ íŒ¨í‚· ë””ìŠ¤íŒ¨ì¹˜
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë””ìŠ¤íŒ¨ì²˜ ë ˆì´ì–´ (Dispatcher Layer)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ game.packet.dispatcher.ts                                                  â”‚ â”‚
â”‚  â”‚ const handlers = {                                                         â”‚ â”‚
â”‚  â”‚   [GamePacketType.useCardRequest]: useCardHandler,                        â”‚ â”‚
â”‚  â”‚   [GamePacketType.reactionRequest]: reactionHandler,                      â”‚ â”‚
â”‚  â”‚   [GamePacketType.loginRequest]: loginHandler,                            â”‚ â”‚
â”‚  â”‚   ...                                                                     â”‚ â”‚
â”‚  â”‚ }                                                                         â”‚ â”‚
â”‚  â”‚ handler(socket, gamePacket)                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ í•¸ë“¤ëŸ¬ í˜¸ì¶œ
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          í•¸ë“¤ëŸ¬ ë ˆì´ì–´ (Handler Layer)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ use.card.handler.ts                                                        â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId, cardType, targetUserId)                      â”‚ â”‚
â”‚  â”‚ 2. GameActionService.useCard() í˜¸ì¶œ                                       â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. ì„œë¹„ìŠ¤ì—ì„œ ìƒì„±ëœ ì•Œë¦¼ íŒ¨í‚·ë“¤ ë¸Œë¡œë“œìºìŠ¤íŠ¸                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ reaction.handler.ts                                                        â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId, reactionType)                                â”‚ â”‚
â”‚  â”‚ 2. GameActionService.resolveReaction() í˜¸ì¶œ                               â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. ì„œë¹„ìŠ¤ì—ì„œ ìƒì„±ëœ ì•Œë¦¼ íŒ¨í‚·ë“¤ ë¸Œë¡œë“œìºìŠ¤íŠ¸                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ì„œë¹„ìŠ¤ í˜¸ì¶œ
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ì„œë¹„ìŠ¤ ë ˆì´ì–´ (Service Layer)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ GameActionService                                                          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ useCard(userId, roomId, cardType, targetUserId?)                       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 1. loadActors() - ì•¡í„° ë¡œë”©                                            â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 2. executeEffect() - ì´í™íŠ¸ ì‹¤í–‰                                       â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 3. applyResults() - ìƒíƒœ ì ìš© ë° ì•Œë¦¼ íŒ¨í‚· ìƒì„±                        â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 4. return { success, failcode, notificationGamePackets }                â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ resolveReaction(userId, roomId, reactionType)                          â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 1. loadActors() - ì•¡í„° ë¡œë”©                                            â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 2. executeStateBasedReaction() - ìƒíƒœë³„ ì²˜ë¦¬                           â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 3. applyResults() - ìƒíƒœ ì ìš© ë° ì•Œë¦¼ íŒ¨í‚· ìƒì„±                        â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ 4. return { success, failcode, notificationGamePackets }                â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ì´í™íŠ¸/ìœ í‹¸ í˜¸ì¶œ
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì´í™íŠ¸/ìœ í‹¸ ë ˆì´ì–´ (Effect/Util Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ effects/                                                                  â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ solo/vaccine.effect.handler.ts                                       â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ interactive/bbang.effect.handler.ts                                  â”‚ â”‚
â”‚  â”‚ â””â”€â”€ interactive/deathMatch.effect.handler.ts                             â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚ utils/                                                                    â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ room.utils.ts (getRoom, getUserFromRoom, updateCharacterFromRoom)   â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ notification.sender.ts (sendNotificationGamePackets)                 â”‚ â”‚
â”‚  â”‚ â””â”€â”€ notification.builder.ts (createUserUpdateNotificationGamePacket)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ë°ì´í„°ë² ì´ìŠ¤/ë©”ëª¨ë¦¬ ì ‘ê·¼
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë°ì´í„° ë ˆì´ì–´ (Data Layer)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ë©”ëª¨ë¦¬ ìƒíƒœ ê´€ë¦¬                                                           â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ rooms Map<number, Room>                                               â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ users Map<string, User>                                              â”‚ â”‚
â”‚  â”‚ â””â”€â”€ roomTimers Map<string, NodeJS.Timeout>                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ê²°ê³¼ ë°˜í™˜ (ì•Œë¦¼ íŒ¨í‚· í¬í•¨)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì´í™íŠ¸/ìœ í‹¸ ë ˆì´ì–´ (Effect/Util Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ effects/                                                                  â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ solo/vaccine.effect.handler.ts                                       â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ interactive/bbang.effect.handler.ts                                  â”‚ â”‚
â”‚  â”‚ â””â”€â”€ interactive/deathMatch.effect.handler.ts                             â”‚ â”‚
â”‚  â”‚                                                                           â”‚ â”‚
â”‚  â”‚ utils/                                                                    â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ room.utils.ts (getRoom, getUserFromRoom, updateCharacterFromRoom) â”‚ â”‚
â”‚  â”‚ â”œâ”€â”€ notification.sender.ts (sendNotificationGamePackets)                 â”‚ â”‚
â”‚  â”‚ â””â”€â”€ notification.builder.ts (createUserUpdateNotificationGamePacket)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ê²°ê³¼ ë°˜í™˜ (ì•Œë¦¼ íŒ¨í‚· í¬í•¨)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ì„œë¹„ìŠ¤ ë ˆì´ì–´ (Service Layer)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ GameActionService                                                          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ useCard() ê²°ê³¼:                                                         â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ { success: boolean, failcode: GlobalFailCode, notificationGamePackets } â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚ â”‚ resolveReaction() ê²°ê³¼:                                                â”‚ â”‚ â”‚
â”‚  â”‚ â”‚ { success: boolean, failcode: GlobalFailCode, notificationGamePackets } â”‚ â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ê²°ê³¼ ë°˜í™˜ (ì•Œë¦¼ íŒ¨í‚· í¬í•¨)
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          í•¸ë“¤ëŸ¬ ë ˆì´ì–´ (Handler Layer)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ use.card.handler.ts                                                        â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId, cardType, targetUserId)                      â”‚ â”‚
â”‚  â”‚ 2. GameActionService.useCard() í˜¸ì¶œ                                       â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. ì„œë¹„ìŠ¤ì—ì„œ ìƒì„±ëœ ì•Œë¦¼ íŒ¨í‚·ë“¤ ë¸Œë¡œë“œìºìŠ¤íŠ¸                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ reaction.handler.ts                                                        â”‚ â”‚
â”‚  â”‚ 1. DTO ê²€ì¦ (userId, roomId, reactionType)                                â”‚ â”‚
â”‚  â”‚ 2. GameActionService.resolveReaction() í˜¸ì¶œ                               â”‚ â”‚
â”‚  â”‚ 3. ì‘ë‹µ íŒ¨í‚· ìƒì„± ë° ì „ì†¡                                                  â”‚ â”‚
â”‚  â”‚ 4. ì„œë¹„ìŠ¤ì—ì„œ ìƒì„±ëœ ì•Œë¦¼ íŒ¨í‚·ë“¤ ë¸Œë¡œë“œìºìŠ¤íŠ¸                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ ì‘ë‹µ íŒ¨í‚· ì „ì†¡ + ì•Œë¦¼ íŒ¨í‚· ë¸Œë¡œë“œìºìŠ¤íŠ¸
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              í´ë¼ì´ì–¸íŠ¸ (Client)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ìƒì„¸ íŒ¨í‚· ì²˜ë¦¬ íë¦„

### 1. **ì¹´ë“œ ì‚¬ìš© ìš”ì²­ (useCardRequest)**
```
í´ë¼ì´ì–¸íŠ¸ â†’ on.data.ts â†’ game.packet.dispatcher.ts â†’ use.card.handler.ts â†’ GameActionService.useCard() â†’ vaccine.effect.handler.ts â†’ room.utils.ts â†’ í•¸ë“¤ëŸ¬ì—ì„œ ì•Œë¦¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸
```

### 2. **ë°˜ì‘ ìš”ì²­ (reactionRequest)**
```
í´ë¼ì´ì–¸íŠ¸ â†’ on.data.ts â†’ game.packet.dispatcher.ts â†’ reaction.handler.ts â†’ GameActionService.resolveReaction() â†’ executeStateBasedReaction() â†’ room.utils.ts â†’ í•¸ë“¤ëŸ¬ì—ì„œ ì•Œë¦¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸
```

## ğŸ¯ í•µì‹¬ ê°œì„ ì‚¬í•­

1. **ë‹¨ì¼ ì§„ì…ì **: `game.packet.dispatcher.ts`ì—ì„œ ëª¨ë“  íŒ¨í‚· ë¼ìš°íŒ…
2. **í†µí•© ì„œë¹„ìŠ¤**: `GameActionService`ë¡œ ëª¨ë“  ê²Œì„ ì•¡ì…˜ í†µí•© ê´€ë¦¬
3. **ê³µí†µ ë¡œì§**: `loadActors`, `applyResults`, `mapErrorToFailCode` ì¬ì‚¬ìš©
4. **ê³„ì¸µ ë¶„ë¦¬**: ê° ë ˆì´ì–´ì˜ ì±…ì„ì´ ëª…í™•íˆ êµ¬ë¶„
5. **ì¼ê´€ì„±**: ëª¨ë“  ì•¡ì…˜ì—ì„œ ë™ì¼í•œ íŒ¨í„´ ì‚¬ìš©
6. **ì•Œë¦¼ ì²˜ë¦¬ ê°œì„ **: ì„œë¹„ìŠ¤ì—ì„œ ì•Œë¦¼ íŒ¨í‚· ìƒì„±, í•¸ë“¤ëŸ¬ì—ì„œ ì „ì†¡í•˜ëŠ” ë‹¨ì¼ ì±…ì„ ë¶„ë¦¬





## ğŸ—ï¸ ë¦¬íŒ©í† ë§ í›„ ê²Œì„ ì„œë²„ ì•„í‚¤í…ì²˜ ë ˆì´ì–´ë³„ ìƒì„¸ ì„¤ëª…

### 1. **ì†Œì¼“ ë ˆì´ì–´ (Socket Layer)**
**ê°œë…**: ë„¤íŠ¸ì›Œí¬ í†µì‹ ì˜ ìµœí•˜ìœ„ ë ˆë²¨ì„ ì¶”ìƒí™”
**ì—­í• **: TCP ì†Œì¼“ ì—°ê²°, íŒ¨í‚· íŒŒì‹±, ë²„í¼ ê´€ë¦¬

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
on.connection.ts     // ì†Œì¼“ ì—°ê²° ê´€ë¦¬
on.data.ts          // íŒ¨í‚· ìˆ˜ì‹  ë° íŒŒì‹±
on.error.ts         // ì—ëŸ¬ ì²˜ë¦¬
on.end.ts           // ì—°ê²° ì¢…ë£Œ ì²˜ë¦¬
```

**ì¶”ìƒí™” ëŒ€ìƒ**: 
- TCP ì†Œì¼“ì˜ ë³µì¡í•œ ë²„í¼ ê´€ë¦¬
- íŒ¨í‚· í—¤ë” íŒŒì‹± (payloadType, version, sequence, payloadLength)
- ì²­í¬ ë‹¨ìœ„ ë°ì´í„° ìˆ˜ì‹  ë° ì¬ì¡°ë¦½

---

### 2. **ë””ìŠ¤íŒ¨ì²˜ ë ˆì´ì–´ (Dispatcher Layer)**
**ê°œë…**: íŒ¨í‚· íƒ€ì…ì— ë”°ë¥¸ ë¼ìš°íŒ…ì„ ì¶”ìƒí™”
**ì—­í• **: íŒ¨í‚· íƒ€ì… ì‹ë³„, ì ì ˆí•œ í•¸ë“¤ëŸ¬ë¡œ ë¼ìš°íŒ…

```typescript
// ì˜ˆì‹œ íŒŒì¼
game.packet.dispatcher.ts

const handlers = {
  [GamePacketType.useCardRequest]: useCardHandler,
  [GamePacketType.reactionRequest]: reactionHandler,
  [GamePacketType.loginRequest]: loginHandler,
  // ... ê¸°íƒ€ í•¸ë“¤ëŸ¬ë“¤
};
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- íŒ¨í‚· íƒ€ì…ë³„ í•¸ë“¤ëŸ¬ ë§¤í•‘
- í•¸ë“¤ëŸ¬ ì„ íƒ ë¡œì§
- íŒ¨í‚· ë¼ìš°íŒ… ê²°ì •

---

### 3. **í•¸ë“¤ëŸ¬ ë ˆì´ì–´ (Handler Layer)**
**ê°œë…**: HTTPì˜ Controllerì™€ ìœ ì‚¬í•œ ì—­í• , ìš”ì²­ ê²€ì¦ê³¼ ì‘ë‹µ ìƒì„±ì„ ì¶”ìƒí™”
**ì—­í• **: DTO ê²€ì¦, ì„œë¹„ìŠ¤ í˜¸ì¶œ, ì‘ë‹µ íŒ¨í‚· ìƒì„±

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
use.card.handler.ts        // ì¹´ë“œ ì‚¬ìš© ìš”ì²­ ì²˜ë¦¬
reaction.handler.ts        // ë°˜ì‘ ìš”ì²­ ì²˜ë¦¬
login.handler.ts           // ë¡œê·¸ì¸ ìš”ì²­ ì²˜ë¦¬
create.room.handler.ts     // ë°© ìƒì„± ìš”ì²­ ì²˜ë¦¬
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì˜ ìœ íš¨ì„± ê²€ì¦
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì˜ ë¶„ë¦¬
- ìš”ì²­/ì‘ë‹µ íŒ¨í‚· ë³€í™˜

---

### 4. **ì„œë¹„ìŠ¤ ë ˆì´ì–´ (Service Layer)**
**ê°œë…**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì„ ì¶”ìƒí™”
**ì—­í• **: ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ í”Œë¡œìš° ì¡°ìœ¨, íŠ¸ëœì­ì…˜ ê´€ë¦¬

```typescript
// ì˜ˆì‹œ íŒŒì¼
game.action.service.ts

export class GameActionService {
  useCard()           // ì¹´ë“œ ì‚¬ìš© ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
  resolveReaction()   // ë°˜ì‘ í•´ê²° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
  loadActors()        // ê³µí†µ ì•¡í„° ë¡œë”©
  applyResults()      // ê³µí†µ ìƒíƒœ ì ìš© ë° ì•Œë¦¼ íŒ¨í‚· ìƒì„±
  mapErrorToFailCode() // ê³µí†µ ì—ëŸ¬ ë§¤í•‘
}
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ í”Œë¡œìš°ì˜ ì¡°ìœ¨
- ì—¬ëŸ¬ ë„ë©”ì¸ ë¡œì§ì˜ ì¡°í•©
- íŠ¸ëœì­ì…˜ ê²½ê³„ ê´€ë¦¬

---

### 5. **ì´í™íŠ¸ ë ˆì´ì–´ (Effect Layer)**
**ê°œë…**: ìˆœìˆ˜í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê³„ì‚°ì„ ì¶”ìƒí™”
**ì—­í• **: ê²Œì„ ê·œì¹™ì— ë”°ë¥¸ ìƒíƒœ ë³€ê²½ ê³„ì‚°

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
effects/solo/
â”œâ”€â”€ vaccine.effect.handler.ts           // ë°±ì‹  ì¹´ë“œ íš¨ê³¼
â”œâ”€â”€ matured.savings.effect.handler.ts  // ì„±ìˆ™í•œ ì €ì¶• íš¨ê³¼
â””â”€â”€ win.lottery.effect.handler.ts      // ë³µê¶Œ ë‹¹ì²¨ íš¨ê³¼

effects/interactive/
â”œâ”€â”€ bbang.effect.handler.ts            // ë¹µì•¼ ì¹´ë“œ íš¨ê³¼
â”œâ”€â”€ deathMatch.effect.handler.ts       // í˜„í”¼ ì¹´ë“œ íš¨ê³¼
â””â”€â”€ shield.effect.handler.ts           // ë°©íŒ¨ ì¹´ë“œ íš¨ê³¼
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- ê²Œì„ ê·œì¹™ì˜ ìˆœìˆ˜í•œ ê³„ì‚° ë¡œì§
- ì¹´ë“œë³„ ê³ ìœ í•œ íš¨ê³¼ ì²˜ë¦¬
- ìƒíƒœ ë¨¸ì‹ ì˜ ì „í™˜ ë¡œì§

---

### 6. **ìœ í‹¸ë¦¬í‹° ë ˆì´ì–´ (Utility Layer)**
**ê°œë…**: ê³µí†µ ê¸°ëŠ¥ê³¼ ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ë¥¼ ì¶”ìƒí™”
**ì—­í• **: ë°ì´í„° ì ‘ê·¼, ì•Œë¦¼ ì „ì†¡, ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì œê³µ

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
utils/room.utils.ts              // ë°©/ìœ ì € ë°ì´í„° ê´€ë¦¬
utils/notification.sender.ts     // ì•Œë¦¼ ì „ì†¡ (í˜„ì¬ ë¯¸ì‚¬ìš©, í•¸ë“¤ëŸ¬ì—ì„œ ì§ì ‘ ë¸Œë¡œë“œìºìŠ¤íŠ¸)
utils/notification.builder.ts    // ì•Œë¦¼ íŒ¨í‚· ìƒì„±
utils/type.converter.ts          // íƒ€ì… ë³€í™˜
utils/validation.ts              // ë°ì´í„° ê²€ì¦
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- ë°ì´í„°ë² ì´ìŠ¤/ë©”ëª¨ë¦¬ ì ‘ê·¼ íŒ¨í„´
- ì•Œë¦¼ ì „ì†¡ ë©”ì»¤ë‹ˆì¦˜
- ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤

---

### 7. **ë°ì´í„° ë ˆì´ì–´ (Data Layer)**
**ê°œë…**: ë°ì´í„° ì €ì¥ì†Œì™€ ìƒíƒœ ê´€ë¦¬ë¥¼ ì¶”ìƒí™”
**ì—­í• **: ê²Œì„ ìƒíƒœ ì €ì¥, ë©”ëª¨ë¦¬ ê´€ë¦¬

```typescript
// ì˜ˆì‹œ íŒŒì¼ë“¤
models/room.model.ts             // ë°© ë°ì´í„° ëª¨ë¸
models/user.model.ts             // ìœ ì € ë°ì´í„° ëª¨ë¸
models/character.model.ts        // ìºë¦­í„° ë°ì´í„° ëª¨ë¸

// ë©”ëª¨ë¦¬ ìƒíƒœ ê´€ë¦¬
const rooms = new Map<number, Room>();
const users = new Map<string, User>();
const roomTimers = new Map<string, NodeJS.Timeout>();
```

**ì¶”ìƒí™” ëŒ€ìƒ**:
- ë°ì´í„° ì €ì¥ì†Œì˜ ë³µì¡ì„±
- ë©”ëª¨ë¦¬ ìƒíƒœ ê´€ë¦¬
- ë°ì´í„° ëª¨ë¸ì˜ êµ¬ì¡°

---

## ğŸ¯ ë ˆì´ì–´ë³„ ì±…ì„ ìš”ì•½

| ë ˆì´ì–´ | ì£¼ìš” ì±…ì„ | ì¶”ìƒí™” ëŒ€ìƒ |
|--------|-----------|-------------|
| **ì†Œì¼“** | ë„¤íŠ¸ì›Œí¬ í†µì‹  | TCP ì†Œì¼“, íŒ¨í‚· íŒŒì‹± |
| **ë””ìŠ¤íŒ¨ì²˜** | íŒ¨í‚· ë¼ìš°íŒ… | íŒ¨í‚· íƒ€ì…ë³„ í•¸ë“¤ëŸ¬ ë§¤í•‘ |
| **í•¸ë“¤ëŸ¬** | ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬ | HTTP Controller íŒ¨í„´ |
| **ì„œë¹„ìŠ¤** | ë¹„ì¦ˆë‹ˆìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ | ë³µì¡í•œ í”Œë¡œìš° ì¡°ìœ¨ |
| **ì´í™íŠ¸** | ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ | ê²Œì„ ê·œì¹™ ê³„ì‚° |
| **ìœ í‹¸ë¦¬í‹°** | ê³µí†µ ê¸°ëŠ¥ | ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ |
| **ë°ì´í„°** | ìƒíƒœ ê´€ë¦¬ | ë°ì´í„° ì €ì¥ì†Œ |

